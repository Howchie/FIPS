<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fatigue Impairment Prediction Suite (FIPS) • FIPS</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Fatigue Impairment Prediction Suite (FIPS)">
<meta property="og:description" content="FIPS provides functions for running bio-mathematical models of fatigue and alertness (BMMs).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">FIPS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/FIPS-simulation-walkthrough.html">FIPS Simulation Walkthrough</a>
    </li>
    <li>
      <a href="articles/plotting.html">Plotting</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="fatigue-impairment-prediction-suite-fips" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#fatigue-impairment-prediction-suite-fips" class="anchor" aria-hidden="true"></a>Fatigue Impairment Prediction Suite (FIPS)</h1></div>
<p><img align="right" src="https://github.com/humanfactors/FIPS/blob/master/inst/logo/FIPS_logo.png?raw=true" alt="FIPSLOGO" width="200"></p>
<p>FIPS provides researchers and practitioners comprehensive set of functions for applying bio-mathematical models (BMMs) of fatigue. FIPS is a young project under active development and is implemented in the R programming language.</p>
<blockquote>
<p>If you are tracking people’s sleep history (e.g., conducting an experience sampling study) or are interested in fatigue prediction, this package is likely to be helpful to you.</p>
</blockquote>
<p>FIPS includes a set of well documented functions for transforming sleep and actigraphy data to the data frame structure (called a <code>FIPS_df</code>) required for executing BMM simulations. Importantly, FIPS includes a set of functions for simulating from and interpreting several forms of BMM, including the Unified Model and Three Process Model. All models are extendable and include customisable parameters.</p>
<div id="what-are-bmms" class="section level2">
<h2 class="hasAnchor">
<a href="#what-are-bmms" class="anchor" aria-hidden="true"></a>What are BMMs?</h2>
<p>BMMs are a class of biological phenomenological models which are used to predict the neuro-behavioural outcomes of fatigue (e.g., alertness, performance) using sleep-wake history. There are several different BMM implementations, but most have their roots in Borbély’s (1982) two process model which stipulates that sleepiness/performance impairment functions in response to two processes: a circadian process and a homeostatic process. BMMs enable hypothesis testing of the latent factors underlying the relationships between sleep, fatigue, and human performance. For example, they enable researchers to estimate the relative contributions of homeostatic processes on fatigue, relative to endogenous circadian processes. These models are also frequently applied by defence and industrial sectors to support system safety as part of broader fatigue management strategies. FIPS is the first open-source BMM framework enabling practitioners to inspect, validate, and ideally extend BMMs.</p>
</div>
<div id="what-is-fips" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-fips" class="anchor" aria-hidden="true"></a>What is FIPS?</h2>
<p>FIPS is an R package which allows users to conduct bio-mathematical modelling. FIPS makes it easy to conduct simulations from BMMs. The FIPS data structures also make parameter estimation more reproducible and standardised. All features of FIPS are based in <code>S3</code> classes, making extensions straightforward.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor" aria-hidden="true"></a>Installation</h2>
<p>To install the latest development version of FIPS:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages('remotes') # if remotes not installed</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"humanfactors/FIPS"</span><span class="op">)</span></code></pre></div>
<p>We highly recommended building the vignettes (with <code>build_vignettes = TRUE</code>; though note this requires additional dependencies) as both vignettes offer comprehensive walkthroughs of the core features of the package .</p>
</div>
<div id="simple-use-case" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-use-case" class="anchor" aria-hidden="true"></a>Simple Use Case</h2>
<p>Full walkthroughs for using FIPS can be found in the vignette <code><a href="articles/FIPS-simulation-walkthrough.html">vignette("FIPS-simulation-walkthrough","FIPS")</a></code>, with further information about plotting in <code><a href="articles/plotting.html">vignette("plotting","FIPS")</a></code>. These files can also be directly accessed from the source Rmarkdown files under <code>./vignettes</code>.</p>
<p>All FIPS simulations require a <code>FIPS_df</code> object (see, <code><a href="reference/FIPS_df.html">?FIPS::FIPS_df</a></code>), which is a form of data frame. There are two methods for generating a <code>FIPS_df</code> from existing data:</p>
<ul>
<li>
<code>parse_sleepwake_sequence</code> can be used to convert a sequence of sleep wake statuses (e.g., binary sequence with equidistance temporal spacing. This is the format used by other proprietary BMM software as well as several actigraphy-based sleep detection algorithms.</li>
<li>
<code>parse_sleeptimes</code> can be used to convert a data frame of sleep and wake times (and a sleep identifier) to a <code>FIPS_df</code> object.</li>
<li>Note that advanced users should be able to create a data frame compliant with the <em>FIPS data format</em>. See <code><a href="reference/FIPS_df.html">help("FIPS_df")</a></code>.</li>
</ul>
<p>For this example, we will run through a <code>parse_sleeptimes</code> example. You must start with a data frame in the <em>Sleep Data Format</em>, which is shown below. Importantly, the datetimes in the columns must be POSIXct datetime objects. We suggest leveraging lubridate for a simple datetime interface. Ideally, you should use these column names and format to avoid conflicts with the generated column names.</p>
<p><strong>The Sleep Data Format</strong> looks as follows:</p>
<table class="table">
<thead><tr class="header">
<th align="left">sleep.start</th>
<th align="left">sleep.end</th>
<th align="right">sleep.id</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2018-05-11 07:07:00</td>
<td align="left">2018-05-11 12:55:00</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">2018-05-12 06:14:00</td>
<td align="left">2018-05-12 12:50:00</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">2018-05-14 01:55:00</td>
<td align="left">2018-05-14 06:29:00</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">2018-05-14 13:30:00</td>
<td align="left">2018-05-14 14:58:00</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
<p>For testing purposes, the following snippet shows how to generate a FIPS compliant sleep data frame (as shown above).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">example.sleeptimes</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>
  sleep.start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>
    from <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/ymd_hms.html" class="external-link">ymd_hms</a></span><span class="op">(</span><span class="st">'2018-05-01 23:00:00'</span>, tz <span class="op">=</span> <span class="st">"Australia/Perth"</span><span class="op">)</span>, 
    to <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/ymd_hms.html" class="external-link">ymd_hms</a></span><span class="op">(</span><span class="st">'2018-05-07 17:00:00'</span>, tz <span class="op">=</span> <span class="st">"Australia/Perth"</span><span class="op">)</span>,
    by <span class="op">=</span> <span class="st">'24 hours'</span><span class="op">)</span>,
  sleep.end <span class="op">=</span> <span class="va">sleep.start</span> <span class="op">+</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/duration.html" class="external-link">dhours</a></span><span class="op">(</span><span class="fl">7.5</span><span class="op">)</span>,
  sleep.id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">sleep.start</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Now that you have the correct sleep times input structure, you can generate the <code>FIPS_df</code> from the sleep data format via the <code>parse_sleeptimes</code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Simulation start date time (i.e., when you want first predictions to start)</span>
<span class="va">simulation.start</span> <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/ymd_hms.html" class="external-link">ymd_hms</a></span><span class="op">(</span><span class="st">'2018-05-01 07:00:00'</span>, tz <span class="op">=</span> <span class="st">"Australia/Perth"</span><span class="op">)</span>
<span class="co"># Simulation end date time (i.e., when you want predictions to end)</span>
<span class="va">simulation.end</span> <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="http://lubridate.tidyverse.org/reference/ymd_hms.html" class="external-link">ymd_hms</a></span><span class="op">(</span><span class="st">'2018-05-07 21:00:00'</span>, tz <span class="op">=</span> <span class="st">"Australia/Perth"</span><span class="op">)</span>
<span class="co"># The Continuous FIPS_df dataframe format</span>
<span class="co"># This creates the format ready for simulation</span>
<span class="va">simulated.dataframe</span> <span class="op">=</span> <span class="fu"><a href="reference/parse_sleeptimes.html">parse_sleeptimes</a></span><span class="op">(</span>
  sleeptimes <span class="op">=</span> <span class="va">example.sleeptimes</span>,
  series.start <span class="op">=</span> <span class="va">simulation.start</span>,
  series.end <span class="op">=</span> <span class="va">simulation.end</span>,
  sleep.start.col <span class="op">=</span> <span class="st">"sleep.start"</span>,
  sleep.end.col <span class="op">=</span> <span class="st">"sleep.end"</span>,
  sleep.id.col <span class="op">=</span> <span class="st">"sleep.id"</span>,
  roundvalue <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<p>The resulting dataframe output (of class <code>FIPS_df</code>) can then be sent the simulation dispatch function <code><a href="reference/FIPS_simulate.html">FIPS_simulate()</a></code>. The simulation functions require a parameter vector/list (pvec). Please see help for <code><a href="reference/TPM_make_pvec.html">TPM_make_pvec()</a></code> or <code><a href="reference/unified_make_pvec.html">unified_make_pvec()</a></code> for more information on generating these vectors.</p>
<p>In the example below, we will run a Three Process Model simulation over the <code>FIPS_df</code> series we just created. To do this, we will use the <code>FIPS_simulation</code> function, which takes in three arguments: a <code>FIPS_df</code> object, a specification of a <code>modeltype</code> (see help for model types currently implemented), and a <code>pvec</code> which is a vector of parameters for the model.</p>
<p>Calling <code><a href="reference/FIPS_simulate.html">FIPS_simulate()</a></code> will produce a <code>FIPS_df</code> with model predictions and predicted model process values (e.g., <code>s</code>, <code>c</code>). The returned <code>FIPS_df</code> will also now inherit the <code>FIPS_simulation</code> class. A <code>FIPS_simulation</code> object has attributes containing the parameter vector, the <code>modeltype</code> string, and the <code>pvec</code> used, and several other values used internally. A custom print function of the object will reveal all this information. Note that this print function does mask some of the columns for ease of reading.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Run a simulation with the three process model</span>
<span class="va">TPM.simulation.results</span> <span class="op">=</span> <span class="fu"><a href="reference/FIPS_simulate.html">FIPS_simulate</a></span><span class="op">(</span>
  FIPS_df <span class="op">=</span> <span class="va">simulated.dataframe</span>, <span class="co"># The FIPS_df</span>
  modeltype <span class="op">=</span> <span class="st">"TPM"</span>,             <span class="co"># three process model</span>
  pvec <span class="op">=</span> <span class="fu"><a href="reference/TPM_make_pvec.html">TPM_make_pvec</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>       <span class="co"># parameter vector with defaults</span></code></pre></div>
<p>You now can access printing, summary and plot methods for the FIPS_simulation object. Note that further transformations to the object in dplyr and similar Tidyverse packages will remove attributes.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">TPM.simulation.results</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">TPM.simulation.results</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">TPM.simulation.results</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="contributing-and-support" class="section level1">
<h1 class="hasAnchor">
<a href="#contributing-and-support" class="anchor" aria-hidden="true"></a>Contributing and Support</h1>
<p>We welcome contributions great or small from the community. It would incredibly useful to receive feedback via Github Issues for anything regarding the package, including: installation issues, bugs or unexpected behaviour, usability, feature requests or inquiries, or even something you don’t understand in the tutorials about this class of models more generally. Please file a Github issue for any general support queries too.</p>
</div>
<div id="terms-for-academic-usage" class="section level1">
<h1 class="hasAnchor">
<a href="#terms-for-academic-usage" class="anchor" aria-hidden="true"></a>Terms for Academic Usage</h1>
<p>In addition to the rights stipulated in the GNU Affero GPL-3, we request that all academic work leveraging FIPS provide a direct citation to the software package.</p>
<p>Wilson et al., (2020). FIPS: An R Package for Biomathematical Modelling of Human Fatigue Related Impairment. <em>Journal of Open Source Software</em>, 5(51), 2340, <a href="https://doi.org/10.21105/joss.02340" class="external-link uri">https://doi.org/10.21105/joss.02340</a></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode tex"><code class="sourceCode latex"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>@article{Wilson2020,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  doi = {10.21105/joss.02340},</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  url = {https://doi.org/10.21105/joss.02340},</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  year = {2020},</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  publisher = {The Open Journal},</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  volume = {5},</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  number = {51},</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  pages = {2340},</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  author = {Michael David Wilson and Luke Strickland and Timothy Ballard},</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  title = {FIPS: An R Package for Biomathematical Modelling of Human Fatigue Related Impairment},</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  journal = {Journal of Open Source Software}</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Michael David Wilson <br><small class="roles"> Author, maintainer </small>  </li>
<li>Luke Strickland <br><small class="roles"> Author </small>  </li>
<li>Timothy Ballard <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.com/humanfactors/FIPS" class="external-link"><img src="https://travis-ci.com/humanfactors/FIPS.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://codecov.io/gh/humanfactors/FIPS" class="external-link"><img src="https://codecov.io/gh/humanfactors/FIPS/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="https://doi.org/10.21105/joss.02340" class="external-link"><img src="https://joss.theoj.org/papers/10.21105/joss.02340/status.svg" alt="DOI"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Michael David Wilson, Luke Strickland, Timothy Ballard.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
